# План развития инфраструктуры

## Цель

Обеспечить дальнейшее развитие инфраструктуры VPN, PKI, мониторинга и резервного копирования для небольшой компании. Все задачи оформлены как action items с указанием цели, сроков и приоритета. Основной акцент — на автоматизацию, отказоустойчивость, воспроизводимость и handoff.

## Ограничения

- Компания небольшая, бюджет ограничен
- Используется облачное окружение (GCP, Yandex Cloud или аналог)
- Все компоненты должны быть воспроизводимы и документированы
- Не допускается ручная настройка без скриптов или пакетов
- Все артефакты должны быть готовы к handoff и проверены через CI

## Таблица задач

| №  | Задача                                              | Цель                                                       | Срок     | Приоритет |
|----|------------------------------------------------------|-------------------------------------------------------------|----------|------------|
| 1  | Внедрить CI/CD для deb-пакетов                      | Автоматизировать сборку, проверку и установку              | 1 неделя | Высокий    |
| 2  | Развернуть deb-репозиторий                          | Централизованное хранение артефактов                       | 2 недели | Средний    |
| 3  | Настроить geo-репликацию backup-хранилища           | Повысить отказоустойчивость                                | 1 неделя | Высокий    |
| 4  | Перенести bash-скрипты в Ansible роли               | Повысить читаемость и масштабируемость                     | 2 недели | Средний    |
| 5  | Интегрировать Telegram/Slack алерты                 | Ускорить реакцию на инциденты                              | 3 дня    | Средний    |
| 6  | Внедрить централизованное логирование               | Упростить аудит и отладку                                  | 2 недели | Средний    |
| 7  | Защитить Prometheus через HTTPS и Basic Auth        | Повысить безопасность                                      | 1 неделя | Высокий    |
| 8  | Документировать recovery-процедуры                  | Упростить handoff и восстановление                         | 1 неделя | Высокий    |
| 9  | Внедрить Terraform для provisioning                 | Повысить воспроизводимость                                 | 2 недели | Средний    |
| 10 | Подготовить onboarding-инструкции                   | Упростить масштабирование команды                          | 3 дня    | Низкий     |

## Дополнительные инициативы

- Fail2Ban + UFW на всех публичных VM  
- DNS-сервер с внутренними именами  
- Переход на WireGuard (опционально)  
- Проверка сроков действия сертификатов  
- Сбор метрик доступности backup-хранилища  
- Внедрение `.norestore` маркеров и audit-логов в backup-скрипты  
- Расширение CI для проверки логов, алертов и сертификатов

## Инструменты

- GitHub Actions / GitLab CI  
- Ansible (`scripts/ansible/`)  
- Terraform  
- Prometheus + Alertmanager  
- rsyslog / Vector / Loki  
- rclone / rsync  
- nginx + Let's Encrypt  
- draw.io / Miro (для схем)

## Артефакты handoff

- `scripts/ci/` — шаблоны для CI  
- `scripts/ansible/` — роли и инвентори  
- `handoff/monitoring-config.tar.gz` — конфигурация мониторинга  
- `handoff/screenshots.md` — подтверждение работы алертов  
- `backup/` — скрипты и конфиги для резервного копирования  
- `handoff/logging.md` — описание логирования и проверок  
- `handoff/recovery.md` — пошаговое восстановление PKI и VPN  

## Формат handoff

Все артефакты проверены через CI, снабжены документацией и готовы к передаче. Каждый компонент протестирован на отдельной VM, все deb-пакеты устанавливаются и удаляются корректно, скрипты идемпотентны, логируют в syslog и проверяют ошибки.

